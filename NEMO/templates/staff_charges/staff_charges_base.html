{% extends 'base.html' %}
{% load custom_tags_and_filters %}
{% block title %}Staff charges{% endblock %}
{% block content %}
	<h1>Staff charges</h1>
	{% if staff_charge %}
		<p>You are charging staff time to {{ staff_charge.customer }} for the project named {{ staff_charge.project }} since {{ staff_charge.start }}.</p>
        <p>
            <label for="staff_charge_note">Charge note: </label>
            <span class="input-group" style="display: inline-block">
                <input maxlength="255" class="form-control input-sm" style="margin-left: 5px;display: inline-block; width: 250px" id="staff_charge_note" value="{{ staff_charge.note|default_if_none:"" }}">
                <span class="input-group-btn" style="display: inline-block;"><button class="btn btn-sm btn-success" onclick="ajax_post('{% url "edit_staff_charge_note" %}', {'staff_charge_note': $('#staff_charge_note').val()}, undefined, undefined, function(){location.reload()})">{% if staff_charge.note %}Update{% else %}Save{% endif %}</button></span>
            </span>
        </p>
		<p><br>Here is a summary of the current charges:</p>

		<table class="table">
			<thead>
			<tr>
				<th>Type</th>
				<th>Start</th>
				<th>End</th>
			</tr>
			</thead>
			<tbody>
			{% for charge in charges %}
					<tr class="{{ charge.class }}">
						<td>{{ charge.type }}</td>
						<td>{{ charge.start }}</td>
						<td>{{ charge.end|default:'' }}</td>
					</tr>
			{% endfor %}
			</tbody>
		</table>
	{% endif %}

	{% block staff_charges_content %}
	{% endblock %}
{% endblock %}