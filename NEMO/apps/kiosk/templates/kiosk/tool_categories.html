{% load custom_tags_and_filters %}
<div class="row">
    {% for category in categories %}
        {% if category not in unqualified_categories or customer.is_staff or "tool"|customization:"kiosk_only_show_qualified_tools" != "enabled" %}
            <div class="col-xs-6">
                <div class="panel panel-default {% if category in unqualified_categories %}disabled{% endif %}"
                     onclick="view_category('{% url 'kiosk_category_choices' category customer.id %}')">
                    <div class="panel-body">
                        <span style="font-size:x-large; margin-right:10px">
                            {% with selected_category_path=selected_category|concat:'/' %}
                                {% if selected_category %}
                                    {{ category|cut:selected_category_path }}
                                {% else %}
                                    {{ category }}
                                {% endif %}
                            {% endwith %}
                        </span>
                    </div>
                </div>
            </div>
        {% endif %}
    {% endfor %}
    {% for tool in tools %}
        {% if tool not in unqualified_tools or customer.is_staff or "tool"|customization:"kiosk_only_show_qualified_tools" != "enabled" %}
            <div class="col-xs-6">
                <div class="panel panel-info {% if tool in unqualified_tools %}disabled{% endif %}"
                     onclick="tool_information('{% url 'kiosk_tool_information' tool.id customer.id 'back_to_category' %}')">
                    <div class="panel-body">
                        <span style="font-size:x-large; margin-right:10px">{{ tool }}</span>
                        {% if tool.in_use %}
                            <span style="font-size:x-large; margin-right:10px" class="glyphicon glyphicon-user primary-highlight"></span>
                        {% endif %}
                        {% if tool.delayed_logoff_in_progress %}
                            <span style="font-size:x-large; margin-right:10px" class="glyphicon glyphicon-time primary-highlight"></span>
                        {% endif %}
                        {% if tool.scheduled_outages %}
                            <span style="font-size:x-large; margin-right:10px" class="glyphicon glyphicon-time danger-highlight"></span>
                        {% elif tool.scheduled_partial_outages %}
                            <span style="font-size:x-large; margin-right:10px" class="glyphicon glyphicon-time warning-highlight"></span>
                        {% endif %}
                        {% if tool.required_resource_is_unavailable %}
                            <span style="font-size:x-large; margin-right:10px" class="glyphicon glyphicon-leaf danger-highlight"></span>
                        {% elif tool.nonrequired_resource_is_unavailable %}
                            <span style="font-size:x-large; margin-right:10px" class="glyphicon glyphicon-leaf warning-highlight"></span>
                        {% endif %}
                        {% if tool.operational == False %}
                            <span style="font-size:x-large; margin-right:10px" class="glyphicon glyphicon-fire danger-highlight"></span>
                        {% elif tool.problematic == True %}
                            <span style="font-size:x-large; margin-right:10px" class="glyphicon glyphicon-wrench warning-highlight"></span>
                        {% endif %}
                    </div>
                </div>
            </div>
        {% endif %}
    {% endfor %}
</div>
